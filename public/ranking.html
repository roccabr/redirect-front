<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Ranking de Pedidos</title>
</head>
<body>
  <h1>Ranking de Pedidos</h1>
  <table border="1" id="ranking-table">
    <thead>
      <tr>
        <th>Pedido</th>
        <th>Qtd. VÃ­deos</th>
        <th>Link</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <p id="erro" style="color:red;"></p>

  <script>
    fetch("https://arquivos.estacionadireito.com.br/api/ranking")
      .then(response => {
        if (!response.ok) {
          throw new Error('Erro na resposta da API');
        }
        return response.json();
      })
      .then(data => {
        const tbody = document.querySelector('#ranking-table tbody');
        tbody.innerHTML = ''; // limpa antes de preencher

        data.forEach(item => {
          const tr = document.createElement('tr');

          const tdNome = document.createElement('td');
          tdNome.textContent = item.nome;

          const tdQtd = document.createElement('td');
          tdQtd.textContent = item.qtd_videos;

          const tdLink = document.createElement('td');
          const a = document.createElement('a');
          a.href = item.link;
          a.textContent = 'Abrir';
          a.target = '_blank';
          tdLink.appendChild(a);

          tr.appendChild(tdNome);
          tr.appendChild(tdQtd);
          tr.appendChild(tdLink);

          tbody.appendChild(tr);
        });
      })
      .catch(error => {
        document.getElementById('erro').textContent = 'Erro ao carregar os dados.';
        console.error('Erro ao carregar ranking:', error);
      });
  </script>
</body>
</html>

